# ğŸ¯ Technical Q&A Preparation for FitTrack Backend

Based on your **DatabaseManager.java** implementation, here are comprehensive answers to potential technical questions:

---

## ğŸ“ **1. Backend Architecture**

### **Q: What is the overall architecture of the backend system?**

**Answer:**
```
Our FitTrack application uses a **layered architecture** with clear separation of concerns:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Presentation Layer (JavaFX)         â”‚
â”‚  (Controllers: Login, Dashboard, etc.)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Business Logic Layer               â”‚
â”‚  (Command Pattern, Session Management)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Data Access Layer (DAO Pattern)      â”‚
â”‚      DatabaseManager.java               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Data Layer (SQLite Database)       â”‚
â”‚          fittrack.db                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Key Design Patterns:**
- **DAO Pattern**: DatabaseManager acts as Data Access Object
- **Singleton Pattern**: SessionManager, CommandHistory
- **Command Pattern**: Undo/Redo functionality
- **MVC Pattern**: Controllers manage view logic

---

### **Q: What technologies or frameworks were used for the backend?**

**Answer:**
```java
// Core Technologies
- Java 17+ (Primary language)
- JavaFX (UI Framework)
- SQLite 3.44.1.0 (Embedded database)
- JDBC (Database connectivity)

// Security & Utilities
- BCrypt 0.4 (Password hashing)
- Maven (Build automation)

// Development Tools
- Visual Studio Code (IDE)
- Git (Version control)
```

**Why These Choices:**
- âœ… **SQLite**: No server setup, portable, perfect for desktop apps
- âœ… **BCrypt**: Industry-standard password hashing with salt
- âœ… **JavaFX**: Rich desktop UI with FXML support
- âœ… **JDBC**: Standard Java database API, no heavy ORM needed

---

### **Q: How does the backend handle scalability and performance?**

**Answer:**
```java
// 1. Connection Pooling Strategy
public Connection connect() {
    // Currently: Direct connection (suitable for single-user desktop app)
    // For multi-user: Could implement HikariCP connection pool
    Connection conn = DriverManager.getConnection(DB_URL);
    return conn;
}

// 2. Resource Management (Try-with-Resources)
try (Connection conn = connect();
     PreparedStatement pstmt = conn.prepareStatement(sql)) {
    // Automatically closes resources, prevents leaks
}

// 3. Prepared Statements (Query Optimization)
PreparedStatement pstmt = conn.prepareStatement(sql);
// SQLite caches execution plans, improves repeated queries

// 4. Indexing Strategy (In createTables())
// Primary keys automatically indexed
// Future: Add composite indexes for frequently queried columns
CREATE INDEX idx_food_log_user_date ON food_log(user_id, date);
```

**Current Limitations:**
- Single-user desktop application (no concurrent user handling needed)
- For multi-user: Would need connection pooling + transaction management

---

### **Q: What are the key components of the backend, and how do they interact?**

**Answer:**
```
Component Diagram:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           DatabaseManager.java                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Connection Management                  â”‚    â”‚
â”‚  â”‚  - connect()                            â”‚    â”‚
â”‚  â”‚  - createTables()                       â”‚    â”‚
â”‚  â”‚  - testConnection()                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  User Management                        â”‚    â”‚
â”‚  â”‚  - register(User, password)             â”‚    â”‚
â”‚  â”‚  - login(username, password)            â”‚    â”‚
â”‚  â”‚  - updateUserProfile(User)              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Goal Management                        â”‚    â”‚
â”‚  â”‚  - saveGoal(Goal)                       â”‚    â”‚
â”‚  â”‚  - getGoals(userId)                     â”‚    â”‚
â”‚  â”‚  - deleteGoal(goalId)                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Food Tracking                          â”‚    â”‚
â”‚  â”‚  - saveFoodLog(FoodLog)                 â”‚    â”‚
â”‚  â”‚  - getFoodLog(userId, date)             â”‚    â”‚
â”‚  â”‚  - deleteFoodLog(foodLogId)             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Workout Tracking                       â”‚    â”‚
â”‚  â”‚  - saveWorkoutPlan(WorkoutPlan)         â”‚    â”‚
â”‚  â”‚  - getWorkoutPlans(userId)              â”‚    â”‚
â”‚  â”‚  - saveWorkoutLog(WorkoutLog)           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Progress Tracking                      â”‚    â”‚
â”‚  â”‚  - saveWeightHistory(WeightHistory)     â”‚    â”‚
â”‚  â”‚  - getWeightHistory(userId)             â”‚    â”‚
â”‚  â”‚  - deleteWeightHistory(historyId)       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Interaction Flow Example (User Login):**
```java
// 1. Controller calls DatabaseManager
LoginController â†’ dbManager.login(username, password)

// 2. DatabaseManager queries database
DatabaseManager â†’ SQLite: SELECT * FROM users WHERE username = ?

// 3. Password verification
DatabaseManager â†’ BCrypt.checkpw(inputPassword, storedHash)

// 4. User object created and returned
DatabaseManager â†’ Controller: User object

// 5. Session stored
SessionManager.getInstance().setLoggedInUser(user)
```

---

### **Q: What security measures are in place for the backend?**

**Answer:**

#### **1. Password Security**
```java
// Registration: Hash password with BCrypt
String hashedPassword = BCrypt.hashpw(password, BCrypt.gensalt());
// Generated hash: $2a$10$N9qo8uL... (60 chars, includes salt)

// Login: Verify password
if (BCrypt.checkpw(password, storedHash)) {
    // Success
}
```

**Why BCrypt:**
- âœ… Adaptive hashing (can increase rounds as hardware improves)
- âœ… Automatic salt generation
- âœ… Resistant to rainbow table attacks
- âœ… Industry standard (used by Spring Security, Django, etc.)

---

#### **2. SQL Injection Prevention**
```java
// âŒ VULNERABLE (String concatenation)
String sql = "SELECT * FROM users WHERE username = '" + username + "'";
// Attack: username = "admin' OR '1'='1"

// âœ… SECURE (Prepared Statements)
String sql = "SELECT * FROM users WHERE username = ?";
PreparedStatement pstmt = conn.prepareStatement(sql);
pstmt.setString(1, username); // Escaped automatically
```

**All queries use PreparedStatement** - 100% protection against SQL injection.

---

#### **3. Data Validation**
```java
// Controllers validate input before database operations
if (foodName.isEmpty()) {
    showError("Please enter food name");
    return; // Prevents NULL insertion
}

if (calories < 0 || calories > 10000) {
    showError("Calories must be between 0 and 10000");
    return; // Prevents malicious data
}
```

---

#### **4. Foreign Key Constraints**
```java
"FOREIGN KEY (user_id) REFERENCES users(user_id) ON DELETE CASCADE"
// Ensures referential integrity
// Automatically deletes related records when user is deleted
```

---

#### **5. Session Management**
```java
// SessionManager (Singleton)
- Stores current logged-in user
- Prevents unauthorized access to user-specific data
- Cleared on logout

public User getLoggedInUser() {
    return currentUser; // Only accessible if logged in
}
```

---

## ğŸ—„ï¸ **2. Database**

### **Q: What type of database is being used, and why was it chosen?**

**Answer:**
```java
// Database: SQLite 3.44.1.0
private static final String DB_FILE = "fittrack.db";
private static final String DB_URL = "jdbc:sqlite:" + DB_FILE;
```

**Why SQLite Over MySQL:**

| Feature | SQLite | MySQL |
|---------|--------|-------|
| **Setup** | âœ… Zero configuration | âŒ Server installation required |
| **Portability** | âœ… Single file database | âŒ Server-dependent |
| **Deployment** | âœ… Embedded in app | âŒ Separate service |
| **Multi-user** | âš ï¸ Limited concurrency | âœ… Handles thousands |
| **Use Case** | âœ… Desktop apps | âœ… Web apps |

**Perfect For:**
- âœ… Single-user desktop application
- âœ… No server maintenance
- âœ… Easy distribution (just copy fittrack.db)
- âœ… Cross-platform (Windows, Mac, Linux)

---

### **Q: Describe the database schema and key tables.**

**Answer:**

#### **Entity-Relationship Diagram:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    users    â”‚â”€â”€â”
â”‚  (user_id)  â”‚  â”‚ 1:N
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                 â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚          â”‚          â”‚          â”‚          â”‚          â”‚
      â†“          â†“          â†“          â†“          â†“          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  goals   â”‚ â”‚food_log  â”‚ â”‚workout   â”‚ â”‚weight    â”‚ â”‚workout   â”‚
â”‚          â”‚ â”‚          â”‚ â”‚_plans    â”‚ â”‚_history  â”‚ â”‚_log      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â”‚ 1:N
                                â†“
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚  plan    â”‚
                          â”‚exercises â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### **Key Tables Breakdown:**

**1. users (Core Identity)**
```sql
CREATE TABLE users (
    user_id INTEGER PRIMARY KEY AUTOINCREMENT,
    username TEXT NOT NULL UNIQUE,
    email TEXT NOT NULL UNIQUE,
    password_hash TEXT NOT NULL,  -- BCrypt hash (60 chars)
    age INTEGER,
    gender TEXT,
    height REAL,
    weight REAL,
    fitness_level TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

---

**2. goals (User Objectives)**
```sql
CREATE TABLE goals (
    goal_id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    goal_type TEXT NOT NULL,        -- 'weight_loss', 'muscle_gain', etc.
    target_value REAL,               -- e.g., 65.0 (kg)
    target_unit TEXT,                -- 'kg', 'lbs', 'days'
    target_date DATE,
    status TEXT DEFAULT 'active',    -- 'active', 'completed', 'abandoned'
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(user_id) ON DELETE CASCADE
);
```

---

**3. food_log (Nutrition Tracking)**
```sql
CREATE TABLE food_log (
    food_log_id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    food_name TEXT NOT NULL,
    calories INTEGER NOT NULL,
    protein REAL,  -- grams
    carbs REAL,    -- grams
    fats REAL,     -- grams
    date DATE NOT NULL,
    FOREIGN KEY (user_id) REFERENCES users(user_id) ON DELETE CASCADE
);
```

---

**4. weight_history (Progress Tracking)**
```sql
CREATE TABLE weight_history (
    history_id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    weight REAL NOT NULL,
    date DATE NOT NULL,
    FOREIGN KEY (user_id) REFERENCES users(user_id) ON DELETE CASCADE
);
```

---

**5. workout_plans (Exercise Programs)**
```sql
CREATE TABLE workout_plans (
    plan_id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    plan_name TEXT NOT NULL,       -- 'Full Body Strength'
    description TEXT,
    difficulty TEXT,                -- 'beginner', 'intermediate', 'advanced'
    duration_weeks INTEGER,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(user_id) ON DELETE CASCADE
);
```

---

### **Q: How is data integrity maintained?**

**Answer:**

#### **1. Primary Keys (Entity Integrity)**
```sql
user_id INTEGER PRIMARY KEY AUTOINCREMENT
-- Ensures unique identification
-- AUTOINCREMENT prevents ID reuse
```

---

#### **2. Foreign Keys (Referential Integrity)**
```sql
FOREIGN KEY (user_id) REFERENCES users(user_id) ON DELETE CASCADE
-- Ensures child records belong to valid parent
-- CASCADE: Delete all goals when user is deleted
```

---

#### **3. UNIQUE Constraints**
```sql
username TEXT NOT NULL UNIQUE
email TEXT NOT NULL UNIQUE
-- Prevents duplicate usernames/emails
```

---

#### **4. NOT NULL Constraints**
```sql
food_name TEXT NOT NULL
-- Ensures required fields are always populated
```

---

#### **5. Check Constraints (Application Layer)**
```java
// Implemented in controllers
if (weight <= 0 || weight > 500) {
    showError("Weight must be between 0 and 500 kg");
    return;
}
```

---

#### **6. Transaction Management (Future Enhancement)**
```java
// Current: Auto-commit mode
// Future: Explicit transactions for multi-table operations
try (Connection conn = connect()) {
    conn.setAutoCommit(false);
    
    // Multiple operations
    saveGoal(goal);
    updateUserProfile(user);
    
    conn.commit(); // All or nothing
} catch (SQLException e) {
    conn.rollback(); // Undo all changes
}
```

---

### **Q: What are the strategies for data backup and recovery?**

**Answer:**

#### **Current Backup Strategy:**
```bash
# SQLite database is a single file
fittrack.db  # 100% of application data

# Manual backup
cp fittrack.db fittrack_backup_2024-01-15.db

# Restore
cp fittrack_backup_2024-01-15.db fittrack.db
```

---

#### **Automated Backup (Proposed):**
```java
public boolean backupDatabase() {
    String timestamp = LocalDateTime.now()
        .format(DateTimeFormatter.ofPattern("yyyyMMdd_HHmmss"));
    
    String backupFile = "fittrack_backup_" + timestamp + ".db";
    
    try {
        Files.copy(
            Paths.get(DB_FILE), 
            Paths.get("backups/" + backupFile),
            StandardCopyOption.REPLACE_EXISTING
        );
        System.out.println("âœ“ Backup created: " + backupFile);
        return true;
    } catch (IOException e) {
        System.err.println("âœ— Backup failed: " + e.getMessage());
        return false;
    }
}
```

---

#### **SQLite VACUUM (Optimization + Backup)**
```java
public boolean optimizeDatabase() {
    try (Connection conn = connect();
         Statement stmt = conn.createStatement()) {
        
        // Creates a fresh copy of the database
        // Removes deleted data, rebuilds indexes
        stmt.execute("VACUUM");
        
        System.out.println("âœ“ Database optimized");
        return true;
    } catch (SQLException e) {
        System.err.println("âœ— Optimization failed: " + e.getMessage());
        return false;
    }
}
```

---

#### **Recovery Scenarios:**

| Scenario | Solution |
|----------|----------|
| **Corrupted database** | Restore from last backup |
| **Accidental deletion** | Use undo/redo (Command Pattern) |
| **Application crash** | SQLite journal files auto-recover |
| **Disk failure** | Cloud sync (future: Dropbox, Google Drive) |

---

### **Q: How does the database handle concurrent users and transactions?**

**Answer:**

#### **Current State (Single-User Desktop App):**
```java
// No concurrency handling needed
// Only one user per application instance
```

---

#### **SQLite Concurrency Limitations:**
```
SQLite Locking:
- READ: Multiple readers allowed
- WRITE: Only ONE writer at a time
- EXCLUSIVE LOCK during writes

For Desktop App:
âœ… Perfect (no concurrent writes)

For Multi-User Web App:
âŒ Would need PostgreSQL/MySQL
```

---

#### **Future Multi-User Support (Migration Path):**
```java
// Would require:
1. Switch to PostgreSQL/MySQL
2. Implement connection pooling (HikariCP)
3. Add transaction management
4. Implement optimistic locking

// Example with PostgreSQL:
@Transactional
public boolean saveGoalWithHistory(Goal goal, WeightHistory history) {
    // Both save or both rollback
    saveGoal(goal);
    saveWeightHistory(history);
}
```

---

## ğŸ”Œ **3. Integration with Frontend**

### **Q: How does the backend communicate with the frontend?**

**Answer:**

#### **Direct Method Invocation (MVC Pattern):**
```
JavaFX Controller â”€â”€â†’ DatabaseManager â”€â”€â†’ SQLite
     (View)              (Model)          (Data)

Example Flow:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. User clicks "Add Food" button               â”‚
â”‚    â†“                                            â”‚
â”‚ 2. FoodLogController.handleAddFoodButtonAction()â”‚
â”‚    â†“                                            â”‚
â”‚ 3. dbManager.saveFoodLog(foodLog)              â”‚
â”‚    â†“                                            â”‚
â”‚ 4. SQL INSERT INTO food_log...                 â”‚
â”‚    â†“                                            â”‚
â”‚ 5. Return success/failure to controller         â”‚
â”‚    â†“                                            â”‚
â”‚ 6. Update UI (refresh table, show toast)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### **Q: What APIs or endpoints are exposed by the backend for frontend consumption?**

**Answer:**

**Not REST API - Direct Java API:**
```java
// DatabaseManager exposes Java methods (not HTTP endpoints)

// User Management API
public boolean register(User user, String password)
public User login(String username, String password)
public boolean updateUserProfile(User user)

// Goal Management API
public boolean saveGoal(Goal goal)
public List<Goal> getGoals(int userId)
public boolean deleteGoal(int goalId)

// Food Tracking API
public boolean saveFoodLog(FoodLog log)
public List<FoodLog> getFoodLog(int userId, LocalDate date)
public boolean deleteFoodLog(int foodLogId)

// Progress Tracking API
public boolean saveWeightHistory(WeightHistory entry)
public List<WeightHistory> getWeightHistory(int userId)
public boolean deleteWeightHistory(int historyId)

// Workout Management API
public boolean saveWorkoutPlan(WorkoutPlan plan)
public List<WorkoutPlan> getWorkoutPlans(int userId)
public boolean deleteWorkoutPlan(int planId)
```

---

### **Q: How is data exchanged between the frontend and backend?**

**Answer:**

#### **Data Flow with POJOs (Plain Old Java Objects):**
```java
// Frontend creates data model
FoodLog newFood = new FoodLog(
    userId,           // From session
    "Chicken Breast", // User input
    350,              // User input
    45.0,             // User input
    0.0,              // User input
    7.0,              // User input
    LocalDate.now()   // Current date
);

// Pass to backend
boolean success = dbManager.saveFoodLog(newFood);

// Backend returns updated object with generated ID
if (success) {
    System.out.println("Saved with ID: " + newFood.getId());
}

// Backend returns list of objects
List<FoodLog> todaysMeals = dbManager.getFoodLog(userId, LocalDate.now());

// Frontend displays in TableView
foodLogTable.setItems(FXCollections.observableArrayList(todaysMeals));
```

---

#### **Observable Collections (JavaFX Binding):**
```java
// Controller maintains observable list
private ObservableList<FoodLog> foodLogList = FXCollections.observableArrayList();

// Backend populates list
foodLogList.clear();
foodLogList.addAll(dbManager.getFoodLog(userId, null));

// TableView automatically updates when list changes
foodLogTable.setItems(foodLogList);

// Add new entry â†’ UI updates automatically
AddFoodLogCommand command = new AddFoodLogCommand(dbManager, newFood, foodLogList);
commandHistory.executeCommand(command); // Adds to list AND database
```

---

## ğŸš€ **4. Deployment and Infrastructure**

### **Q: Where is the backend deployed?**

**Answer:**
```
Deployment Type: Desktop Application (Not Server-Based)

Current Setup:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User's Computer                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  FitTrack.jar (JavaFX App)       â”‚  â”‚
â”‚  â”‚    â”œâ”€â”€ Controllers              â”‚  â”‚
â”‚  â”‚    â”œâ”€â”€ Views (FXML)              â”‚  â”‚
â”‚  â”‚    â”œâ”€â”€ Models                    â”‚  â”‚
â”‚  â”‚    â””â”€â”€ DatabaseManager           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                â†“                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  fittrack.db (SQLite Database)   â”‚  â”‚
â”‚  â”‚  (same directory as JAR)         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Installation:
1. Copy FitTrack.jar to user's computer
2. Database file created on first run
3. No server setup required!
```

---

### **Q: What is the deployment process for the backend?**

**Answer:**

#### **Build Process (Maven):**
```bash
# 1. Compile source code
mvn clean compile

# 2. Run tests (if any)
mvn test

# 3. Package as executable JAR
mvn package

# Output: target/FitTrack-1.0.jar
```

---

#### **Distribution Package:**
```
FitTrack-Distribution/
â”œâ”€â”€ FitTrack.jar          # Executable JAR
â”œâ”€â”€ README.md             # User guide
â”œâ”€â”€ LICENSE               # MIT License
â””â”€â”€ lib/                  # Dependencies (if not uber-jar)
    â”œâ”€â”€ javafx-controls.jar
    â”œâ”€â”€ sqlite-jdbc.jar
    â””â”€â”€ jbcrypt.jar
```

---

#### **User Installation Steps:**
```bash
# 1. Ensure Java 17+ is installed
java -version

# 2. Run the application
java -jar FitTrack.jar

# 3. Database file created automatically
# fittrack.db appears in same directory
```

---

#### **Future: Installer Creation:**
```bash
# Using jpackage (Java 14+)
jpackage --input target/ \
         --name FitTrack \
         --main-jar FitTrack.jar \
         --type exe \
         --icon resources/fittrack.ico \
         --win-menu \
         --win-shortcut

# Creates: FitTrack-1.0.exe (Windows Installer)
```

---

### **Q: How are environment variables and configurations managed?**

**Answer:**

#### **Current Configuration (Hardcoded):**
```java
// DatabaseManager.java
private static final String DB_FILE = "fittrack.db";
private static final String DB_URL = "jdbc:sqlite:" + DB_FILE;
```

---

#### **Proposed: Config File Approach:**
```properties
# config.properties
database.file=fittrack.db
database.backup.enabled=true
database.backup.interval=daily
ui.theme=light
logging.level=INFO
```

```java
// Load configuration
Properties config = new Properties();
try (InputStream input = new FileInputStream("config.properties")) {
    config.load(input);
    String dbFile = config.getProperty("database.file");
}
```

---

#### **Future: User Preferences:**
```java
// Store user settings in database
CREATE TABLE app_settings (
    setting_key TEXT PRIMARY KEY,
    setting_value TEXT,
    user_id INTEGER,
    FOREIGN KEY (user_id) REFERENCES users(user_id)
);

// Per-user themes, notification preferences, etc.
```

---

## ğŸ”§ **5. Troubleshooting and Error Handling**

### **Q: What are some common error scenarios, and how are they handled?**

**Answer:**

#### **1. Database Connection Failure**
```java
// Error: Database file locked or corrupted
public Connection connect() {
    try {
        Connection conn = DriverManager.getConnection(DB_URL);
        System.out.println("âœ“ Database connected: " + DB_FILE);
        return conn;
    } catch (SQLException e) {
        System.err.println("âœ— Database connection failed: " + e.getMessage());
        // User sees: "Unable to connect to database. Please restart application."
        return null;
    }
}

// Solution:
1. Check if fittrack.db is locked by another process
2. Verify file permissions
3. Try deleting .db-journal file
4. Restore from backup
```

---

#### **2. Duplicate Username/Email**
```java
// Error: UNIQUE constraint failed: users.username
public boolean register(User user, String password) {
    try {
        // ... INSERT INTO users ...
    } catch (SQLException e) {
        if (e.getMessage().contains("UNIQUE constraint failed")) {
            System.err.println("âœ— Username or email already exists");
            // UI shows: "Username already taken. Please choose another."
            return false;
        }
    }
}
```

---

#### **3. Foreign Key Violation**
```java
// Error: Trying to save goal for non-existent user
public boolean saveGoal(Goal goal) {
    try {
        // ... INSERT INTO goals ...
    } catch (SQLException e) {
        if (e.getMessage().contains("FOREIGN KEY constraint failed")) {
            System.err.println("âœ— Invalid user ID: " + goal.userId);
            // Session likely expired - force re-login
            return false;
        }
    }
}
```

---

#### **4. NULL Value Errors**
```java
// Error: NULL in NOT NULL column
public boolean saveFoodLog(FoodLog log) {
    // Validation BEFORE database operation
    if (log.getFoodName() == null || log.getFoodName().isEmpty()) {
        System.err.println("âœ— Food name is required");
        return false;
    }
    
    if (log.getCalories() < 0) {
        System.err.println("âœ— Calories cannot be negative");
        return false;
    }
    
    // Now safe to insert
    try {
        // ... INSERT INTO food_log ...
    }
}
```

---

#### **5. Auto-Increment ID Not Retrieved**
```java
// Error: New record doesn't get its ID
public boolean saveGoal(Goal goal) {
    try {
        pstmt.executeUpdate();
        
        // Critical: Get generated ID
        try (Statement stmt = conn.createStatement();
             ResultSet rs = stmt.executeQuery("SELECT last_insert_rowid()")) {
            if (rs.next()) {
                goal.goalId = rs.getInt(1);
                System.out.println("âœ“ Goal saved with ID: " + goal.goalId);
            } else {
                System.err.println("âš  Goal saved but ID not retrieved");
                // Still successful, but UI might not update properly
            }
        }
        return true;
    }
}
```

---

### **Q: How can issues in the backend be debugged or monitored?**

**Answer:**

#### **1. Console Logging (Current Approach):**
```java
// Success logs
System.out.println("âœ“ User registered: " + user.username);
System.out.println("âœ“ Food log saved with ID: " + log.getId());

// Error logs
System.err.println("âœ— Database connection failed: " + e.getMessage());
e.printStackTrace(); // Full stack trace

// Debug logs
System.out.println("DEBUG: Registering user: " + user.username);
System.out.println("DEBUG: Password hash: " + hashedPassword.substring(0, 20) + "...");
```

---

#### **2. SQL Query Logging (Future Enhancement):**
```java
// Log all executed queries
public PreparedStatement prepareStatement(Connection conn, String sql) {
    System.out.println("DEBUG SQL: " + sql);
    return conn.prepareStatement(sql);
}

// Output:
// DEBUG SQL: INSERT INTO food_log(user_id, food_name, calories, date) VALUES(?,?,?,?)
// DEBUG PARAMS: [1, 'Chicken Breast', 350, '2024-01-15']
```

---

#### **3. Database Inspection Tools:**
```bash
# Command-line SQLite viewer
sqlite3 fittrack.db

# GUI Tools
- DB Browser for SQLite (https://sqlitebrowser.org/)
- DBeaver (https://dbeaver.io/)

# Useful queries:
SELECT COUNT(*) FROM users;
SELECT * FROM food_log WHERE date = '2024-01-15';
PRAGMA integrity_check;  -- Verify database integrity
```

---

#### **4. Application Metrics (Proposed):**
```java
public class DatabaseMetrics {
    private static int queryCount = 0;
    private static long totalQueryTime = 0;
    
    public static void logQuery(String queryType, long durationMs) {
        queryCount++;
        totalQueryTime += durationMs;
        
        System.out.println(String.format(
            "Query #%d: %s took %dms (avg: %dms)",
            queryCount, queryType, durationMs, totalQueryTime / queryCount
        ));
    }
}

// Usage:
long start = System.currentTimeMillis();
dbManager.getFoodLog(userId, date);
DatabaseMetrics.logQuery("SELECT food_log", System.currentTimeMillis() - start);
```

---

#### **5. Error Reporting (Future):**
```java
public class ErrorReporter {
    public static void reportError(String context, Exception e) {
        // 1. Log to file
        try (PrintWriter out = new PrintWriter(new FileWriter("errors.log", true))) {
            out.println("[" + LocalDateTime.now() + "] " + context);
            e.printStackTrace(out);
        }
        
        // 2. Show user-friendly message
        Alert alert = new Alert(Alert.AlertType.ERROR);
        alert.setTitle("Error");
        alert.setHeaderText(context);
        alert.setContentText("An error occurred. Please check errors.log for details.");
        alert.showAndWait();
        
        // 3. Future: Send to analytics service
        // Analytics.trackError(context, e);
    }
}
```

---

## ğŸš€ **6. Future Enhancements**

### **Q: What are the planned future enhancements for the backend?**

**Answer:**

#### **1. Cloud Synchronization**
```java
// Sync local SQLite with cloud database
public class CloudSync {
    public void syncToCloud() {
        // 1. Export local data to JSON
        // 2. Upload to Firebase/AWS
        // 3. Download updates from other devices
        // 4. Merge changes (conflict resolution)
    }
}
```

---

#### **2. Data Export/Import**
```java
public boolean exportToCSV(String filename) {
    // Export all user data to CSV for backup
    try (FileWriter writer = new FileWriter(filename)) {
        writer.write("date,food_name,calories,protein,carbs,fats\n");
        
        for (FoodLog log : getFoodLog(userId, null)) {
            writer.write(String.format("%s,%s,%d,%.1f,%.1f,%.1f\n",
                log.getDate(), log.getFoodName(), log.getCalories(),
                log.getProtein(), log.getCarbs(), log.getFats()
            ));
        }
        return true;
    }
}
```

---

#### **3. Advanced Analytics**
```java
public class NutritionAnalytics {
    public Map<String, Double> getWeeklyAverages(int userId) {
        // Calculate average calories, protein, carbs, fats per day
        // Identify trends (eating more on weekends, etc.)
        // Suggest optimizations
    }
    
    public List<String> getFoodRecommendations(int userId) {
        // Based on goals and current intake
        // "You're low on protein. Try adding eggs or chicken."
    }
}
```

---

#### **4. Multi-User Support**
```java
// Switch to PostgreSQL for web deployment
// Add user roles (admin, coach, member)
public class UserManagement {
    public boolean assignCoach(int userId, int coachId) {
        // Coaches can view member progress
    }
}
```

---

#### **5. Integration with Fitness APIs**
```java
public class ExternalIntegrations {
    public void syncWithFitbit() {
        // Import steps, heart rate, sleep data
    }
    
    public void syncWithMyFitnessPal() {
        // Import food logs from other apps
    }
}
```

---

### **Q: How is the backend designed to accommodate new features?**

**Answer:**

#### **Design Principles for Extensibility:**

**1. Open-Closed Principle:**
```java
// New features add methods, don't modify existing ones
public class DatabaseManager {
    // Existing methods (DON'T CHANGE)
    public boolean saveFoodLog(FoodLog log) { ... }
    
    // New feature (ADD NEW METHOD)
    public boolean saveFoodLogWithMacroGoals(FoodLog log, MacroGoals goals) {
        // New functionality without breaking existing code
    }
}
```

---

**2. Command Pattern (Already Implemented):**
```java
// Easy to add new commands
public class ExportDataCommand implements Command {
    @Override
    public boolean execute() {
        // Export data to CSV
    }
    
    @Override
    public boolean undo() {
        // Delete exported file
    }
}
```

---

**3. DAO Pattern Evolution:**
```java
// Current: Direct SQL in DatabaseManager
// Future: Interface-based DAOs

public interface FoodLogDAO {
    boolean save(FoodLog log);
    List<FoodLog> findByUserAndDate(int userId, LocalDate date);
    boolean delete(int id);
}

public class SQLiteFoodLogDAO implements FoodLogDAO {
    // SQLite implementation
}

public class PostgreSQLFoodLogDAO implements FoodLogDAO {
    // PostgreSQL implementation (for future migration)
}
```

---

**4. Plugin Architecture (Proposed):**
```java
public interface FitTrackPlugin {
    String getName();
    void initialize(DatabaseManager dbManager);
    void execute();
}

// Users can add custom plugins
public class CustomReportPlugin implements FitTrackPlugin {
    // Generate custom progress reports
}
```

---

## ğŸ“ **Summary: Key Talking Points**

**When asked about backend architecture, emphasize:**

âœ… **Simplicity**: "We use a layered architecture with clear separation - Controllers handle UI, DatabaseManager handles data persistence, SQLite stores everything in a single portable file."

âœ… **Security**: "All passwords are BCrypt-hashed with auto-generated salts. All SQL queries use PreparedStatements to prevent injection attacks."

âœ… **SQLite Choice**: "For a desktop fitness tracker, SQLite is perfect - zero setup, single-file portability, and excellent performance for single-user workloads."

âœ… **Error Handling**: "We use try-with-resources for automatic resource cleanup, comprehensive logging with visual symbols (âœ“/âœ—), and user-friendly error messages in the UI."

âœ… **Extensibility**: "The Command Pattern enables undo/redo, and our DAO design makes it easy to switch databases in the future if we move to a web-based multi-user system."

âœ… **AI Assistance**: "Generative AI helped us migrate from MySQL to SQLite, implement security best practices, and design the Command Pattern for undo/redo functionality."

---

**Good luck with your Technical Q&A! ğŸš€**
